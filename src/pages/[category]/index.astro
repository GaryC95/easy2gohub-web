---
import ToolLayout from "../../layouts/ToolLayout.astro";
import { CATEGORY_ORDER, CATEGORY_META, getToolsByCategory } from "../../data/tools";

export async function getStaticPaths() {
  return CATEGORY_ORDER.map((category) => ({ params: { category } }));
}

const { category } = Astro.params as { category: string };

const meta = (CATEGORY_META as any)[category];
if (!meta) throw new Error("Category not found");

const list = getToolsByCategory(category as any);
const canonical = `https://www.easy2gohub.com/${category}/`;
---

<ToolLayout
  title={`${meta.label} - Easy2GoHub`}
  description={meta.desc}
  canonical={canonical}
  adsProfile="default"
>
  <section class="tool-card p-8 md:p-10 space-y-6">
    <header class="space-y-2">
      <h2 class="text-2xl md:text-3xl font-extrabold text-slate-900 tracking-tight">{meta.label}</h2>
      <p class="text-slate-600">{meta.desc}</p>
    </header>

    <div class="grid md:grid-cols-2 gap-4">
      {list
        .slice()
        .sort((a, b) => (a.order ?? 999) - (b.order ?? 999))
        .map((t) => (
          <a
            href={`/${t.category}/${t.slug}/`}
            class="tool-card p-6 bg-white/60 border border-white/40 rounded-2xl hover:shadow-xl hover:shadow-slate-200/40 transition"
          >
            <div class="flex items-center gap-3">
              <div class="size-10 rounded-xl bg-primary/10 text-primary flex items-center justify-center">
                <span class="material-symbols-outlined">{t.icon}</span>
              </div>
              <div class="min-w-0">
                <div class="font-extrabold text-slate-900 truncate">{t.title}</div>
                <div class="text-sm text-slate-500 line-clamp-2">{t.description}</div>
              </div>
            </div>

            <div class="mt-4 flex gap-2 flex-wrap">
              {t.tags?.slice(0, 3).map((tag) => (
                <span class="text-[10px] font-extrabold uppercase tracking-widest text-slate-500 bg-white/60 border border-white/60 px-2 py-1 rounded-full">
                  {tag}
                </span>
              ))}
            </div>
          </a>
        ))}
    </div>
  </section>
</ToolLayout>
